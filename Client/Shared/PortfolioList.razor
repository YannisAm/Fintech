
@if (Portfolios == null || Portfolios.Count == 0)
{
    <AuthorizeView>
        <Authorized>
            <MudText Typo="Typo.body1">
                You have not yet a Portfolio to display something. Please
                press <MudButton DisableRipple="true" Style="text-transform:none" Href="/addPortfolio" Variant="Variant.Text">Add Portfolio</MudButton> to be redirected to
                add a new portfolio
            </MudText>
        </Authorized>
        <NotAuthorized>
            <MudText Typo="Typo.subtitle1">Please first <MudLink Href="/login">login</MudLink> to see this page</MudText>
        </NotAuthorized>
    </AuthorizeView>
}
else
{
    <AuthorizeView>
        <Authorized>
            <MudTable Items="Portfolios" FixedHeader="true" Hover="true" Bordered="true" Filter="new Func<Portfolio,bool>(FilterFunc1)" @bind-SelectedItem="_selectedItem1">
                <ToolBarContent>
                    <MudText Typo="Typo.h4"><u>Portfolios</u></MudText>
                    <MudSpacer />
                    <MudTextField @bind-Value="searchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
                </ToolBarContent>
                <HeaderContent>
                    <MudTh>Portfolio Name</MudTh>
                    <MudTh>Securities Owned</MudTh>
                    <MudTh>Date-Time Created</MudTh>
                    <MudTh>Description</MudTh>
                </HeaderContent>
                <RowTemplate Context="portfolio">
                    <MudTd DataLabel="Portfolio Name"><MudLink Href="@($"/portfoliodetails/{portfolio.Id}")">@portfolio.NameOfPortfolio</MudLink></MudTd>
                    <MudTd DataLabel="Securities Owned">@securitiesCount[iterator++] </MudTd>
                    <MudTd DataLabel="Date-Time Created">@portfolio.DateTimeCreated</MudTd>
                    <MudTd DataLabel="Description">@CutTheText(portfolio.Description)</MudTd>
                </RowTemplate>
                <FooterContent>
                    <MudTd>Sum</MudTd>
                    <MudTd>@securitiesCount.Sum()</MudTd>
                    <MudTd>-</MudTd>
                    <MudTd>-</MudTd>
                </FooterContent>
                <PagerContent>
                    <MudTablePager PageSizeOptions="new int[] { 10, 25, 50, 100 }" InfoFormat="@($"{infoFormat}")" HorizontalAlignment="HorizontalAlignment.End" />
                </PagerContent>
            </MudTable>
            <MudButton ButtonType="ButtonType.Button" Class="mt-5 mb-5" Href="/addPortfolio" Style="text-transform:none" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Add" Color="Color.Primary">Add Portfolio</MudButton>
        </Authorized>
        <NotAuthorized>
            <MudText Typo="Typo.subtitle1">Please first <MudLink Href="/login">login</MudLink> to see this page</MudText>
        </NotAuthorized>
    </AuthorizeView>
    
}